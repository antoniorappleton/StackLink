<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>StackLink</title>

    <meta name="theme-color" content="#0b2b62" />
    <link rel="manifest" href="manifest.json" />

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Design tokens Tailwind -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                50: '#eef6ff',
                100: '#d8e9ff',
                200: '#b6d6ff',
                300: '#8dbdff',
                400: '#5ea0ff',
                500: '#2c80ff',
                600: '#1559d6',
                700: '#0f47aa',
                800: '#0d377f',
                900: '#0b2b62',
                950: '#081c3f',
              },
              ink: {
                50: '#f8fafc',
                100: '#f1f5f9',
                200: '#e2e8f0',
                300: '#cbd5e1',
                400: '#94a3b8',
                500: '#64748b',
                600: '#475569',
                700: '#334155',
                800: '#1f2937',
                900: '#0f172a',
                950: '#0a1221',
              },
            },
            boxShadow: {
              focus: '0 0 0 4px rgba(44,128,255,.18)',
              card: '0 10px 30px rgba(2,6,23,.12), 0 2px 8px rgba(2,6,23,.05)',
            },
            borderRadius: { xl: '14px', '2xl': '20px' },
            fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
          },
        },
      };
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- App styles -->
    <link rel="stylesheet" href="styles.css?v=14" />
  </head>

  <body class="text-slate-100">
    <div id="app" class="min-h-dvh flex flex-col">
      <!-- Topbar -->
      <header class="topbar">
          <div class="container toolbar-no-search">
            <!-- Marca -->
            <a class="brand flex items-center gap-3" href="#">
              <img src="icons/icon-192.png" alt="StackLink" class="w-7 h-7 rounded-xl" />
              <span class="font-semibold text-white">StackLink</span>
            </a>

            <!-- Sort -->
            <div class="select-wrap">
              <select id="filter-sort" class="select">
                <option value="dateDesc">Mais recentes</option>
                <option value="nameAsc">Nome (A→Z)</option>
                <option value="popDesc">Popularidade</option>
              </select>
            </div>

            <!-- Vista compacta -->
            <label class="view-toggle-wrap flex items-center gap-2">
              <input id="view-toggle" type="checkbox" />
              <span class="subtle">Vista compacta</span>
            </label>

            <!-- Ações -->
            <div class="actions flex items-center gap-2">
              <button id="btn-new-category" class="btn btn-sm">+ Categoria</button>
              <button id="btn-add" class="btn btn-primary btn-sm">+ Link</button>
            </div>

            <!-- Utilizador -->
            <div id="user-chip" class="user-chip hidden">
              <span id="user-name">—</span>
              <button id="btn-logout" class="icon-btn" title="Sair">⎋</button>
            </div>
          </div>
      </header>

      <!-- Conteúdo -->
      <main class="main">
        <div class="content-area">
          <!-- Pesquisa -->
          <div class="search-wrap mb-3">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="7" stroke-width="1.5"></circle>
              <path d="m20 20-3.5-3.5" stroke-width="1.5"></path>
            </svg>
            <input id="search" type="text" placeholder="Pesquisar links..." />
          </div>

          <!-- Pills -->
          <div id="cat-pills" class="pills-row mb-3"></div>

          <!-- Grid -->
          <section id="grid" class="grid-links"></section>
        </div>
      </main>



      <!-- Footer -->
      <footer class="footer">
        <div class="container grid grid-cols-4 text-center">
          <button id="ft-home" class="app-footer-btn active">
            <span class="label">Dashboard</span>
          </button>
          <button id="ft-cats" class="app-footer-btn">
            <span class="label">Categorias</span>
          </button>
          <button id="ft-fav" class="app-footer-btn">
            <span class="label">Favoritos</span>
          </button>
          <button id="ft-settings" class="app-footer-btn">
            <span class="label">Config.</span>
          </button>
        </div>
      </footer>
    </div>

    <!-- Modal de Autenticação -->
    <div id="auth-modal" class="modal-backdrop hidden items-center justify-center">
      <div class="modal-panel w-full max-w-md">
        <!-- Header / Tabs -->
        <div class="px-6 pt-5 pb-3 border-b border-white/10">
          <div class="flex items-center justify-between">
            <h3 id="auth-title" class="text-lg font-semibold text-white">Entrar</h3>
            <button id="auth-close" class="hidden p-2 rounded-lg hover:bg-white/5" title="Fechar">✕</button>
          </div>
          <p id="auth-sub" class="text-sm text-slate-300 mt-1">
            Usa o teu e-mail e palavra-passe.
          </p>
          <div class="mt-4 grid grid-cols-2 gap-2">
            <button id="tab-login" class="tab-btn px-3 py-2 rounded-xl border border-white/10 bg-white/5 font-medium">
              Entrar
            </button>
            <button id="tab-signup" class="tab-btn px-3 py-2 rounded-xl border border-white/10">
              Criar conta
            </button>
          </div>
        </div>

        <!-- Corpo -->
        <form id="auth-form" class="px-6 py-5 space-y-3">
          <div>
            <label class="block text-sm mb-1 text-slate-300">E-mail</label>
            <input id="auth-email" type="email" required placeholder="nome@exemplo.com" class="w-full" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300">Palavra-passe</label>
            <input id="auth-pass" type="password" required placeholder="••••••••" class="w-full" />
          </div>

          <div id="auth-extra" class="hidden">
            <label class="block text-sm mb-1 text-slate-300">Nome (opcional)</label>
            <input id="auth-name" type="text" placeholder="Como devemos chamar-te?" class="w-full" />
          </div>

          <button id="auth-submit" type="submit" class="btn btn-primary w-full justify-center">
            Continuar
          </button>

          <div class="flex items-center justify-between">
            <button id="auth-forgot" type="button" class="text-sm text-brand-400 hover:underline">
              Esqueci a senha
            </button>
            <span id="auth-msg" class="text-sm text-rose-400"></span>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Nova Categoria -->
    <div id="cat-modal" class="modal-backdrop hidden items-center justify-center">
      <div class="modal-panel w-full max-w-md p-5">
        <h3 class="text-lg font-semibold mb-3 text-white">Nova Categoria</h3>
        <form id="cat-form" class="space-y-3">
          <div>
            <label class="block text-sm mb-1 text-slate-300">Nome</label>
            <input id="cat-name" required placeholder="Ex.: Tecnologia" class="w-full" />
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm mb-1 text-slate-300">Cor</label>
              <input id="cat-color" type="color" value="#2563eb" class="w-full h-10 rounded-xl border border-white/10 bg-transparent" />
            </div>
            <div>
              <label class="block text-sm mb-1 text-slate-300">Ícone</label>
              <select id="cat-icon" class="w-full">
                <option value="code">Code</option>
                <option value="news">News</option>
                <option value="book">Book</option>
                <option value="tv">TV</option>
                <option value="chart">Chart</option>
                <option value="folder">Folder</option>
                <option value="star">Star</option>
              </select>
            </div>
          </div>
          <div class="flex justify-end gap-2 pt-2">
            <button type="button" id="cat-cancel" class="btn">Cancelar</button>
            <button class="btn btn-primary">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal: Adicionar Link -->
    <div id="modal-add" class="modal-backdrop hidden items-center justify-center">
      <div class="modal-panel w-full max-w-lg p-5">
        <h3 class="text-lg font-semibold mb-3 text-white">Adicionar Link</h3>
        <form id="form-add" class="space-y-3">
          <input type="url" id="add-url" required placeholder="https://..." class="w-full" />
          <input type="text" id="add-title" placeholder="Título (opcional)" class="w-full" />
          <textarea id="add-desc" placeholder="Descrição (opcional)" class="w-full"></textarea>
          <div class="flex gap-2">
            <select id="add-category" class="flex-1"></select>
            <label class="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/10">
              <input type="checkbox" id="add-fav" /> Favorito
            </label>
          </div>
          <div class="flex justify-end gap-2 pt-2">
            <button type="button" id="btn-cancel" class="btn">Cancelar</button>
            <button type="submit" class="btn btn-primary">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 hidden px-4 py-2 rounded-xl text-white shadow">
      <span id="toast-text"></span>
    </div>

    <!-- App -->
    <script type="module" src="js/main.js?v=14"></script>
  </body>
</html>
